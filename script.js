const toggleBtn=document.getElementById("toggle-btn");const chatSection=document.getElementById("chat-section");const aboutSection=document.getElementById("about-section");const pageTitle=document.getElementById("page-title");const darkToggle=document.getElementById("dark-toggle");const chatBox=document.getElementById("chat-box");const input=document.getElementById("user-input");const sendBtn=document.getElementById("send-btn");const langSelect=document.getElementById("lang-select");toggleBtn.addEventListener("click",()=>{if(chatSection.style.display!=="none"){chatSection.style.display="none";aboutSection.style.display="block";toggleBtn.textContent="Back to Chat";pageTitle.textContent="About Us ‚Äî MAYA"}else{aboutSection.style.display="none";chatSection.style.display="flex";toggleBtn.textContent="About Us";pageTitle.textContent="MAYA ‚Äî LegalSathi"}});darkToggle.addEventListener("change",()=>{document.body.classList.toggle("dark",darkToggle.checked);localStorage.setItem("darkMode",darkToggle.checked)});if(localStorage.getItem("darkMode")==="true"){darkToggle.checked=true;document.body.classList.add("dark")}sendBtn.addEventListener("click",sendMsg);input.addEventListener("keypress",e=>{if(e.key==="Enter")sendMsg()});async function sendMsg(){const msg=input.value.trim();if(!msg)return;appendMessage(msg,"user");input.value="";appendMessage("MAYA is fetching the law... üìñ","maya");try{const res=await fetch("/get_law",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:msg})});const data=await res.json();const lang=langSelect.value;let summary=data.summary;if(lang==="hindi")summary="‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§Ø‡§π‡§æ‡§Å ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§π‡•ã‡§ó‡§æ (translation feature needed)";const answer=`üìò ${data.title}\n${summary}\nüîó Source: ${data.source}`;const typingMsg=chatBox.querySelector(".message.maya:last-child");if(typingMsg)typingMsg.remove();appendMessage(answer,"maya")}catch(err){const typingMsg=chatBox.querySelector(".message.maya:last-child");if(typingMsg)typingMsg.remove();appendMessage("Sorry, could not fetch law. Try again.","maya");console.error(err)}}function appendMessage(text,sender){const msgDiv=document.createElement("div");msgDiv.className=`message ${sender}`;msgDiv.textContent=text;chatBox.appendChild(msgDiv);chatBox.scrollTop=chatBox.scrollHeight}